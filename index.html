<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>kubo-rpc-client</title><meta name="description" content="Documentation for kubo-rpc-client"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">kubo-rpc-client</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>kubo-rpc-client</h2></div><div class="tsd-panel tsd-typography"><a id="md:kubo-rpc-client-" class="tsd-anchor"></a><h1><a href="#md:kubo-rpc-client-">kubo-rpc-client <!-- omit in toc --></a></h1><p><a href="https://ipfs.tech"><img src="https://img.shields.io/badge/project-IPFS-blue.svg?style=flat-square" alt="ipfs.tech"></a>
<a href="https://discuss.ipfs.tech"><img src="https://img.shields.io/discourse/https/discuss.ipfs.tech/posts.svg?style=flat-square" alt="Discuss"></a>
<a href="https://codecov.io/gh/ipfs/js-kubo-rpc-client"><img src="https://img.shields.io/codecov/c/github/ipfs/js-kubo-rpc-client.svg?style=flat-square" alt="codecov"></a>
<a href="https://github.com/ipfs/js-kubo-rpc-client/actions/workflows/js-test-and-release.yml?query=branch%3Amain"><img src="https://img.shields.io/github/actions/workflow/status/ipfs/js-kubo-rpc-client/js-test-and-release.yml?branch=main&style=flat-square" alt="CI"></a></p>
<blockquote>
<p>A client library for the Kubo RPC API</p>
</blockquote>
<a id="md:table-of-contents-" class="tsd-anchor"></a><h2><a href="#md:table-of-contents-">Table of contents <!-- omit in toc --></a></h2><ul>
<li><a href="#md:install">Install</a><ul>
<li><a href="#md:browser-script-tag">Browser <code>&lt;script&gt;</code> tag</a></li>
</ul>
</li>
<li><a href="#md:kubo-rpc-client">Kubo RPC Client</a></li>
<li><a href="#md:getting-started">Getting Started</a><ul>
<li><a href="#md:next-steps">Next Steps</a></li>
</ul>
</li>
<li><a href="#md:usage">Usage</a><ul>
<li><a href="#md:createoptions"><code>create([options])</code></a></li>
<li><a href="#md:parameters">Parameters</a></li>
<li><a href="#md:options">Options</a></li>
<li><a href="#md:returns">Returns</a></li>
<li><a href="#md:example">Example</a></li>
<li><a href="#md:api">API</a></li>
<li><a href="#md:additional-options">Additional Options</a></li>
<li><a href="#md:instance-utils">Instance Utils</a></li>
<li><a href="#md:static-types-and-utils">Static Types and Utils</a><ul>
<li><a href="#md:glob-source">Glob source</a><ul>
<li><a href="#md:globsourcepath-pattern-options"><code>globSource(path, pattern, [options])</code></a></li>
<li><a href="#md:example-1">Example</a></li>
</ul>
</li>
<li><a href="#md:url-source">URL source</a><ul>
<li><a href="#md:urlsourceurl"><code>urlSource(url)</code></a></li>
<li><a href="#md:example-2">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#md:running-the-daemon-with-the-right-port">Running the daemon with the right port</a></li>
<li><a href="#md:importing-the-module-and-usage">Importing the module and usage</a></li>
<li><a href="#md:in-a-web-browser">In a web browser</a></li>
<li><a href="#md:custom-headers">Custom Headers</a></li>
<li><a href="#md:global-timeouts">Global Timeouts</a></li>
</ul>
</li>
<li><a href="#md:development">Development</a><ul>
<li><a href="#md:testing">Testing</a></li>
</ul>
</li>
<li><a href="#md:historical-context">Historical context</a></li>
<li><a href="#md:license">License</a></li>
<li><a href="#md:contribute">Contribute</a></li>
</ul>
<a id="md:install" class="tsd-anchor"></a><h2><a href="#md:install">Install</a></h2><pre><code class="language-console"><span class="hl-0">$ npm i kubo-rpc-client</span>
</code><button>Copy</button></pre>
<a id="md:browser-ltscriptgt-tag" class="tsd-anchor"></a><h3><a href="#md:browser-ltscriptgt-tag">Browser <code>&lt;script&gt;</code> tag</a></h3><p>Loading this module through a script tag will make it&#39;s exports available as <code>KuboRpcClient</code> in the global namespace.</p>
<pre><code class="language-html"><span class="hl-1">&lt;</span><span class="hl-2">script</span><span class="hl-3"> </span><span class="hl-4">src</span><span class="hl-3">=</span><span class="hl-5">&quot;https://unpkg.com/kubo-rpc-client/dist/index.min.js&quot;</span><span class="hl-1">&gt;&lt;/</span><span class="hl-2">script</span><span class="hl-1">&gt;</span>
</code><button>Copy</button></pre>
<a id="md:kubo-rpc-client" class="tsd-anchor"></a><h2><a href="#md:kubo-rpc-client">Kubo RPC Client</a></h2><h3 align="center">JavaScript client library for the Kubo RPC API</h3>

<p align="center">
  <a href="https://app.element.io/#/room/#ipfs-chatter:ipfs.io"><img src="https://img.shields.io/badge/matrix-%23ipfs%3Amatrix.org-blue.svg?style=flat" /> </a>
  <a href="https://discord.gg/ipfs"><img src="https://img.shields.io/discord/806902334369824788?color=blueviolet&label=discord&style=flat" /></a>
  <a href="https://github.com/ipfs/team-mgmt/blob/master/MGMT_JS_CORE_DEV.md"><img src="https://img.shields.io/badge/team-mgmt-blue.svg?style=flat" /></a>
</p>

<p align="center">
  <a href="https://codecov.io/gh/ipfs/js-kubo-rpc-client"><img src="https://img.shields.io/codecov/c/github/ipfs/js-kubo-rpc-client/master.svg?style=flat-square"></a>
   <a href="https://bundlephobia.com/result?p=kubo-rpc-client"><img src="https://flat.badgen.net/bundlephobia/minzip/kubo-rpc-client"></a>
  <br>
  <a href="https://github.com/feross/standard"><img src="https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square"></a>
  <a href="https://github.com/RichardLitt/standard-readme"><img src="https://img.shields.io/badge/standard--readme-OK-green.svg?style=flat-square" /></a>
  <a href=""><img src="https://img.shields.io/badge/npm-%3E%3D3.0.0-orange.svg?style=flat-square" /></a>
  <a href=""><img src="https://img.shields.io/badge/Node.js-%3E%3D10.0.0-orange.svg?style=flat-square" /></a>
  <a href="https://www.npmjs.com/package/kubo-rpc-client"><img src="https://img.shields.io/npm/dm/kubo-rpc-client.svg" /></a>
  <a href="https://www.jsdelivr.com/package/npm/kubo-rpc-client"><img src="https://data.jsdelivr.com/v1/package/npm/kubo-rpc-client/badge"/></a>
  <br>
</p>

<a id="md:getting-started" class="tsd-anchor"></a><h2><a href="#md:getting-started">Getting Started</a></h2><p>We&#39;ve come a long way, but this project is still in Alpha, lots of development is happening, APIs might change, beware of üêâ..</p>
<pre><code class="language-bash"><span class="hl-6">npm</span><span class="hl-0"> </span><span class="hl-7">install</span><span class="hl-0"> </span><span class="hl-8">--save</span><span class="hl-0"> </span><span class="hl-7">kubo-rpc-client</span>
</code><button>Copy</button></pre>
<p>Both the Current and Active LTS versions of Node.js are supported. Please see <a href="https://nodejs.org/">nodejs.org</a> for what these currently are.</p>
<a id="md:next-steps" class="tsd-anchor"></a><h3><a href="#md:next-steps">Next Steps</a></h3><!-- TODO: currently useless
- Read the [docs](https://ipfs.github.io/js-kubo-rpc-client)
-->

<ul>
<li>Look into the <a href="https://github.com/ipfs-examples/js-ipfs-examples">examples</a> to learn how to spawn an RPC client or a full IPFS node in Node.js and in the Browser</li>
<li>Consult the <a href="https://github.com/ipfs/js-ipfs/tree/master/docs/core-api">Core API docs</a> to see what you can do with an IPFS node</li>
<li>Check out <a href="https://docs.ipfs.tech">https://docs.ipfs.tech</a> for tips, how-tos and more</li>
<li>Head over to <a href="https://proto.school">https://proto.school</a> to take interactive tutorials that cover core IPFS APIs</li>
<li>See <a href="https://blog.ipfs.tech">https://blog.ipfs.tech</a> for news and more</li>
<li>Need help? Please ask &#39;How do I?&#39; questions on <a href="https://discuss.ipfs.tech">https://discuss.ipfs.tech</a></li>
</ul>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">Usage</a></h2><a id="md:createoptions" class="tsd-anchor"></a><h4><a href="#md:createoptions"><code>create([options])</code></a></h4><blockquote>
<p>create an instance of the HTTP API client</p>
</blockquote>
<a id="md:parameters" class="tsd-anchor"></a><h4><a href="#md:parameters">Parameters</a></h4><p>None</p>
<a id="md:options" class="tsd-anchor"></a><h4><a href="#md:options">Options</a></h4><p><code>options</code> can be a <code>String</code>, a <code>URL</code> or a <code>Multiaddr</code> which will be interpreted as the address of the IPFS node we wish to use the API of.</p>
<p>Alternatively it can be an object which may have the following keys:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td><code>String</code> or <code>URL</code> or <code>Multiaddr</code></td>
<td><code>&#39;http://localhost:5001/api/v0&#39;</code></td>
<td>A URL that resolves to a running instance of the IPFS <a href="https://docs.ipfs.io/reference/http/api/">HTTP RPC API</a></td>
</tr>
<tr>
<td>protocol</td>
<td><code>String</code></td>
<td><code>&#39;http&#39;</code></td>
<td>The protocol to used (ignored if url is specified)</td>
</tr>
<tr>
<td>host</td>
<td><code>String</code></td>
<td><code>&#39;localhost&#39;</code></td>
<td>The host to used (ignored if url is specified)</td>
</tr>
<tr>
<td>port</td>
<td><code>number</code></td>
<td><code>5001</code></td>
<td>The port to used (ignored if url is specified)</td>
</tr>
<tr>
<td>path</td>
<td><code>String</code></td>
<td><code>&#39;api/v0&#39;</code></td>
<td>The path to used (ignored if url is specified)</td>
</tr>
<tr>
<td>agent</td>
<td><a href="https://nodejs.org/api/http.html#http_class_http_agent">http.Agent</a></td>
<td><code>http.Agent({ keepAlive: true, maxSockets: 6 })</code></td>
<td>An <code>http.Agent</code> used to control client behaviour (node.js only)</td>
</tr>
</tbody></table>
<a id="md:returns" class="tsd-anchor"></a><h4><a href="#md:returns">Returns</a></h4><table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>Object</code></td>
<td>An object that conforms to the <a href="https://github.com/ipfs/js-ipfs/tree/master/docs/core-api">IPFS Core API</a></td>
</tr>
</tbody></table>
<a id="md:example" class="tsd-anchor"></a><h4><a href="#md:example">Example</a></h4><pre><code class="language-JavaScript"><span class="hl-9">import</span><span class="hl-0"> { </span><span class="hl-10">create</span><span class="hl-0"> } </span><span class="hl-9">from</span><span class="hl-0"> </span><span class="hl-7">&#39;kubo-rpc-client&#39;</span><br/><br/><span class="hl-11">// connect to the default API address http://localhost:5001</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">client</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">()</span><br/><br/><span class="hl-11">// connect to a different API</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">client</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">({ </span><span class="hl-10">url:</span><span class="hl-0"> </span><span class="hl-7">&quot;http://127.0.0.1:5002/api/v0&quot;</span><span class="hl-0"> });</span><br/><br/><span class="hl-11">// connect using a URL</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">client</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">(</span><span class="hl-8">new</span><span class="hl-0"> </span><span class="hl-6">URL</span><span class="hl-0">(</span><span class="hl-7">&#39;http://127.0.0.1:5002&#39;</span><span class="hl-0">))</span><br/><br/><span class="hl-11">// call Core API methods</span><br/><span class="hl-8">const</span><span class="hl-0"> { </span><span class="hl-12">cid</span><span class="hl-0"> } = </span><span class="hl-9">await</span><span class="hl-0"> </span><span class="hl-10">client</span><span class="hl-0">.</span><span class="hl-6">add</span><span class="hl-0">(</span><span class="hl-7">&#39;Hello world!&#39;</span><span class="hl-0">)</span>
</code><button>Copy</button></pre>
<p>Do you use Kubo&#39;s <a href="https://github.com/ipfs/kubo/blob/master/docs/config.md#apiauthorizations"><strong><code>API.Authorizations</code></strong></a>? Check the <a href="#md:custom-headers">Custom Headers</a> section.</p>
<a id="md:api" class="tsd-anchor"></a><h3><a href="#md:api">API</a></h3><p><code>kubo-rpc-client</code> will not implement the <a href="https://github.com/ipfs/js-ipfs/tree/master/docs/core-api">IPFS Core API</a>. Please see <a href="https://github.com/ipfs/kubo/issues/9125">https://github.com/ipfs/kubo/issues/9125</a> for more information.</p>
<a id="md:additional-options" class="tsd-anchor"></a><h3><a href="#md:additional-options">Additional Options</a></h3><p>All core API methods take <em>additional</em> <code>options</code> specific to the HTTP API:</p>
<ul>
<li><code>headers</code> - An object or <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers">Headers</a> instance that can be used to set custom HTTP headers. Note that this option can also be <a href="#md:custom-headers">configured globally</a> via the constructor options.</li>
<li><code>searchParams</code> - An object or <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code>URLSearchParams</code></a> instance that can be used to add additional query parameters to the query string sent with each request.</li>
</ul>
<a id="md:instance-utils" class="tsd-anchor"></a><h3><a href="#md:instance-utils">Instance Utils</a></h3><ul>
<li><code>ipfs.getEndpointConfig()</code></li>
</ul>
<p>Call this on your client instance to return an object containing the <code>host</code>, <code>port</code>, <code>protocol</code> and <code>api-path</code>.</p>
<a id="md:static-types-and-utils" class="tsd-anchor"></a><h3><a href="#md:static-types-and-utils">Static Types and Utils</a></h3><p>Aside from the default export, <code>kubo-rpc-client</code> exports various types and utilities that are included in the bundle:</p>
<ul>
<li><a href="https://www.npmjs.com/package/multiaddr"><code>multiaddr</code></a></li>
<li><a href="https://www.npmjs.com/package/multibase"><code>multibase</code></a></li>
<li><a href="https://www.npmjs.com/package/multicodec"><code>multicodec</code></a></li>
<li><a href="https://www.npmjs.com/package/multihashes"><code>multihash</code></a></li>
<li><a href="https://www.npmjs.com/package/cids"><code>CID</code></a></li>
<li><a href="https://github.com/ipfs/js-ipfs-utils/blob/master/src/files/glob-source.js"><code>globSource</code></a> (not available in the browser)</li>
<li><a href="https://github.com/ipfs/js-ipfs-utils/blob/master/src/files/url-source.js"><code>urlSource</code></a></li>
</ul>
<p>These can be accessed like this, for example:</p>
<pre><code class="language-js"><span class="hl-9">import</span><span class="hl-0"> { </span><span class="hl-10">CID</span><span class="hl-0"> } </span><span class="hl-9">from</span><span class="hl-0"> </span><span class="hl-7">&#39;kubo-rpc-client&#39;</span>
</code><button>Copy</button></pre>
<a id="md:glob-source" class="tsd-anchor"></a><h4><a href="#md:glob-source">Glob source</a></h4><p>A utility to allow files on the file system to be easily added to IPFS.</p>
<a id="md:globsourcepath-pattern-options" class="tsd-anchor"></a><h5><a href="#md:globsourcepath-pattern-options"><code>globSource(path, pattern, [options])</code></a></h5><ul>
<li><code>path</code>: A path to a single file or directory to glob from</li>
<li><code>pattern</code>: A pattern to match files under <code>path</code></li>
<li><code>options</code>: Optional options</li>
<li><code>options.hidden</code>: Hidden/dot files (files or folders starting with a <code>.</code>, for example, <code>.git/</code>) are not included by default. To add them, use the option <code>{ hidden: true }</code>.</li>
</ul>
<p>Returns an async iterable that yields <code>{ path, content }</code> objects suitable for passing to <code>ipfs.add</code>.</p>
<a id="md:example-1" class="tsd-anchor"></a><h5><a href="#md:example-1">Example</a></h5><pre><code class="language-js"><span class="hl-9">import</span><span class="hl-0"> { </span><span class="hl-10">create</span><span class="hl-0">, </span><span class="hl-10">globSource</span><span class="hl-0"> } </span><span class="hl-9">from</span><span class="hl-0"> </span><span class="hl-7">&#39;ipfs&#39;</span><br/><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-9">await</span><span class="hl-0"> </span><span class="hl-6">create</span><span class="hl-0">()</span><br/><br/><span class="hl-9">for</span><span class="hl-0"> </span><span class="hl-9">await</span><span class="hl-0"> (</span><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">file</span><span class="hl-0"> </span><span class="hl-8">of</span><span class="hl-0"> </span><span class="hl-10">ipfs</span><span class="hl-0">.</span><span class="hl-6">addAll</span><span class="hl-0">(</span><span class="hl-6">globSource</span><span class="hl-0">(</span><span class="hl-7">&#39;./docs&#39;</span><span class="hl-0">, </span><span class="hl-7">&#39;**/*&#39;</span><span class="hl-0">))) {</span><br/><span class="hl-0">  </span><span class="hl-10">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-10">file</span><span class="hl-0">)</span><br/><span class="hl-0">}</span><br/><span class="hl-11">/*</span><br/><span class="hl-11">{</span><br/><span class="hl-11">  path: &#39;docs/assets/anchor.js&#39;,</span><br/><span class="hl-11">  cid: CID(&#39;QmVHxRocoWgUChLEvfEyDuuD6qJ4PhdDL2dTLcpUy3dSC2&#39;),</span><br/><span class="hl-11">  size: 15347</span><br/><span class="hl-11">}</span><br/><span class="hl-11">{</span><br/><span class="hl-11">  path: &#39;docs/assets/bass-addons.css&#39;,</span><br/><span class="hl-11">  cid: CID(&#39;QmPiLWKd6yseMWDTgHegb8T7wVS7zWGYgyvfj7dGNt2viQ&#39;),</span><br/><span class="hl-11">  size: 232</span><br/><span class="hl-11">}</span><br/><span class="hl-11">...</span><br/><span class="hl-11">*/</span>
</code><button>Copy</button></pre>
<a id="md:url-source" class="tsd-anchor"></a><h4><a href="#md:url-source">URL source</a></h4><p>A utility to allow content from the internet to be easily added to IPFS.</p>
<a id="md:urlsourceurl" class="tsd-anchor"></a><h5><a href="#md:urlsourceurl"><code>urlSource(url)</code></a></h5><ul>
<li><code>url</code>: A string URL or <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL"><code>URL</code></a> instance to send HTTP GET request to</li>
</ul>
<p>Returns an async iterable that yields <code>{ path, content }</code> objects suitable for passing to <code>ipfs.add</code>.</p>
<a id="md:example-2" class="tsd-anchor"></a><h5><a href="#md:example-2">Example</a></h5><pre><code class="language-js"><span class="hl-9">import</span><span class="hl-0"> { </span><span class="hl-10">create</span><span class="hl-0">, </span><span class="hl-10">urlSource</span><span class="hl-0"> } </span><span class="hl-9">from</span><span class="hl-0"> </span><span class="hl-7">&#39;kubo-rpc-client&#39;</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">()</span><br/><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">file</span><span class="hl-0"> = </span><span class="hl-9">await</span><span class="hl-0"> </span><span class="hl-10">ipfs</span><span class="hl-0">.</span><span class="hl-6">add</span><span class="hl-0">(</span><span class="hl-6">urlSource</span><span class="hl-0">(</span><span class="hl-7">&#39;https://ipfs.io/images/ipfs-logo.svg&#39;</span><span class="hl-0">))</span><br/><span class="hl-10">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-10">file</span><span class="hl-0">)</span><br/><br/><span class="hl-11">/*</span><br/><span class="hl-11">{</span><br/><span class="hl-11">  path: &#39;ipfs-logo.svg&#39;,</span><br/><span class="hl-11">  cid: CID(&#39;QmTqZhR6f7jzdhLgPArDPnsbZpvvgxzCZycXK7ywkLxSyU&#39;),</span><br/><span class="hl-11">  size: 3243</span><br/><span class="hl-11">}</span><br/><span class="hl-11">*/</span>
</code><button>Copy</button></pre>
<a id="md:running-the-daemon-with-the-right-port" class="tsd-anchor"></a><h3><a href="#md:running-the-daemon-with-the-right-port">Running the daemon with the right port</a></h3><p>To interact with the API, you need to have a local daemon running. It needs to be open on the right port. <code>5001</code> is the default, and is used in the examples below, but it can be set to whatever you need.</p>
<pre><code class="language-sh"><span class="hl-11"># Show the ipfs config API port to check it is correct</span><br/><span class="hl-0">&gt; ipfs config Addresses.API</span><br/><span class="hl-6">/ip4/127.0.0.1/tcp/5001</span><br/><span class="hl-11"># Set it if it does not match the above output</span><br/><span class="hl-0">&gt; ipfs config Addresses.API /ip4/127.0.0.1/tcp/5001</span><br/><span class="hl-11"># Restart the daemon after changing the config</span><br/><br/><span class="hl-11"># Run the daemon</span><br/><span class="hl-0">&gt; ipfs daemon</span>
</code><button>Copy</button></pre>
<a id="md:importing-the-module-and-usage" class="tsd-anchor"></a><h3><a href="#md:importing-the-module-and-usage">Importing the module and usage</a></h3><pre><code class="language-javascript"><span class="hl-9">import</span><span class="hl-0"> { </span><span class="hl-10">create</span><span class="hl-0"> } </span><span class="hl-9">from</span><span class="hl-0"> </span><span class="hl-7">&#39;kubo-rpc-client&#39;</span><br/><br/><span class="hl-11">// connect to ipfs daemon API server</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">(</span><span class="hl-7">&#39;http://localhost:5001&#39;</span><span class="hl-0">) </span><span class="hl-11">// (the default in Node.js)</span><br/><br/><span class="hl-11">// or connect with multiaddr</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">(</span><span class="hl-7">&#39;/ip4/127.0.0.1/tcp/5001&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-11">// or using options</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">({ </span><span class="hl-10">host:</span><span class="hl-0"> </span><span class="hl-7">&#39;localhost&#39;</span><span class="hl-0">, </span><span class="hl-10">port:</span><span class="hl-0"> </span><span class="hl-7">&#39;5001&#39;</span><span class="hl-0">, </span><span class="hl-10">protocol:</span><span class="hl-0"> </span><span class="hl-7">&#39;http&#39;</span><span class="hl-0"> })</span><br/><br/><span class="hl-11">// or specifying a specific API path</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">({ </span><span class="hl-10">host:</span><span class="hl-0"> </span><span class="hl-7">&#39;1.1.1.1&#39;</span><span class="hl-0">, </span><span class="hl-10">port:</span><span class="hl-0"> </span><span class="hl-7">&#39;80&#39;</span><span class="hl-0">, </span><span class="hl-10">apiPath:</span><span class="hl-0"> </span><span class="hl-7">&#39;/ipfs/api/v0&#39;</span><span class="hl-0"> })</span>
</code><button>Copy</button></pre>
<a id="md:in-a-web-browser" class="tsd-anchor"></a><h3><a href="#md:in-a-web-browser">In a web browser</a></h3><p><strong>through Browserify</strong></p>
<p>Same as in Node.js, you just have to <a href="http://browserify.org">browserify</a> the code before serving it. See the browserify repo for how to do that.</p>
<p>See the example in the <a href="https://github.com/ipfs-examples/js-ipfs-examples/tree/master/examples">examples folder</a> to get a boilerplate.</p>
<p><strong>through webpack</strong></p>
<p>See the example in the <a href="https://github.com/ipfs-examples/js-ipfs-examples/tree/master/examples/http-client-bundle-webpack">examples folder</a> to get an idea on how to use <code>kubo-rpc-client</code> with webpack.</p>
<p><strong>from CDN</strong></p>
<p>Instead of a local installation (and browserification) you may request a remote copy of IPFS API from <a href="https://www.jsdelivr.com/package/npm/ipfs">jsDelivr</a>.</p>
<p>To always request the latest version, use one of the following examples:</p>
<pre><code class="language-html"><span class="hl-11">&lt;!-- loading the minified version using jsDelivr --&gt;</span><br/><span class="hl-1">&lt;</span><span class="hl-2">script</span><span class="hl-3"> </span><span class="hl-4">src</span><span class="hl-3">=</span><span class="hl-5">&quot;https://cdn.jsdelivr.net/npm/kubo-rpc-client/dist/index.min.js&quot;</span><span class="hl-1">&gt;&lt;/</span><span class="hl-2">script</span><span class="hl-1">&gt;</span>
</code><button>Copy</button></pre>
<p>For maximum security you may also decide to:</p>
<ul>
<li>reference a specific version of IPFS API (to prevent unexpected breaking changes when a newer latest version is published)</li>
<li><a href="https://www.srihash.org/">generate a SRI hash</a> of that version and use it to ensure integrity. Learn more also at the <a href="https://www.jsdelivr.com/using-sri-with-dynamic-files">jsdelivr website</a></li>
<li>set the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes">CORS settings attribute</a> to make anonymous requests to CDN</li>
</ul>
<p>Example:</p>
<pre><code class="language-html"><span class="hl-1">&lt;</span><span class="hl-2">script</span><br/><span class="hl-3">  </span><span class="hl-4">src</span><span class="hl-3">=</span><span class="hl-5">&quot;https://www.jsdelivr.com/package/npm/kubo-rpc-client&quot;</span><br/><span class="hl-3">  </span><span class="hl-4">integrity</span><span class="hl-3">=</span><span class="hl-5">&quot;sha384-5bXRcW9kyxxnSMbOoHzraqa7Z0PQWIao+cgeg327zit1hz5LZCEbIMx/LWKPReuB&quot;</span><br/><span class="hl-3">  </span><span class="hl-4">crossorigin</span><span class="hl-3">=</span><span class="hl-5">&quot;anonymous&quot;</span><br/><span class="hl-1">&gt;&lt;/</span><span class="hl-2">script</span><span class="hl-1">&gt;</span>
</code><button>Copy</button></pre>
<p>CDN-based IPFS API provides the <code>KuboRpcClient</code> object of the global <code>window</code> object. Example:</p>
<pre><code class="language-js"><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-10">window</span><span class="hl-0">.</span><span class="hl-10">KuboRpcClient</span><span class="hl-0">.</span><span class="hl-6">create</span><span class="hl-0">({ </span><span class="hl-10">host:</span><span class="hl-0"> </span><span class="hl-7">&#39;localhost&#39;</span><span class="hl-0">, </span><span class="hl-10">port:</span><span class="hl-0"> </span><span class="hl-13">5001</span><span class="hl-0"> })</span>
</code><button>Copy</button></pre>
<p>If you omit the host and port, the client will parse <code>window.host</code>, and use this information. This also works, and can be useful if you want to write apps that can be run from multiple different gateways:</p>
<pre><code class="language-js"><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-10">window</span><span class="hl-0">.</span><span class="hl-10">KuboRpcClient</span><span class="hl-0">.</span><span class="hl-6">create</span><span class="hl-0">()</span>
</code><button>Copy</button></pre>
<a id="md:custom-headers" class="tsd-anchor"></a><h3><a href="#md:custom-headers">Custom Headers</a></h3><p>If you wish to send custom headers with each request made by this library, for example, the <code>Authorization</code> header. This can be useful if your Kubo node has keys defined in <a href="https://github.com/ipfs/kubo/blob/master/docs/config.md#apiauthorizations"><code>API.Authorizations</code></a>.</p>
<p>If you&#39;re using <code>bearer:token</code>, where <code>token</code> is <code>abc123</code>:</p>
<pre><code class="language-js"><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-10">host:</span><span class="hl-0"> </span><span class="hl-7">&#39;localhost&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-10">port:</span><span class="hl-0"> </span><span class="hl-13">5001</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-10">protocol:</span><span class="hl-0"> </span><span class="hl-7">&#39;http&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-10">headers:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-10">authorization:</span><span class="hl-0"> </span><span class="hl-7">&#39;Bearer abc123&#39;</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">})</span>
</code><button>Copy</button></pre>
<p>If you&#39;re using <code>basic:user:password</code>, where <code>user:password</code> is <code>alice:secret</code>:</p>
<pre><code class="language-js"><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-10">host:</span><span class="hl-0"> </span><span class="hl-7">&#39;localhost&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-10">port:</span><span class="hl-0"> </span><span class="hl-13">5001</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-10">protocol:</span><span class="hl-0"> </span><span class="hl-7">&#39;http&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-10">headers:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-11">// For Node.js, using:</span><br/><span class="hl-0">    </span><span class="hl-11">//    Buffer.from(&#39;alice:secret&#39;).toString(&#39;base64&#39;)</span><br/><span class="hl-0">    </span><span class="hl-11">// is preferred over using `btoa`.</span><br/><span class="hl-0">    </span><span class="hl-10">authorization:</span><span class="hl-0"> </span><span class="hl-7">&#39;Basic &#39;</span><span class="hl-0"> + </span><span class="hl-6">btoa</span><span class="hl-0">(</span><span class="hl-7">&#39;alice:secret&#39;</span><span class="hl-0">)</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">})</span>
</code><button>Copy</button></pre>
<a id="md:global-timeouts" class="tsd-anchor"></a><h3><a href="#md:global-timeouts">Global Timeouts</a></h3><p>To set a global timeout for <em>all</em> requests pass a value for the <code>timeout</code> option:</p>
<pre><code class="language-js"><span class="hl-11">// Timeout after 10 seconds</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">({ </span><span class="hl-10">timeout:</span><span class="hl-0"> </span><span class="hl-13">10000</span><span class="hl-0"> })</span><br/><span class="hl-11">// Timeout after 2 minutes</span><br/><span class="hl-8">const</span><span class="hl-0"> </span><span class="hl-12">ipfs</span><span class="hl-0"> = </span><span class="hl-6">create</span><span class="hl-0">({ </span><span class="hl-10">timeout:</span><span class="hl-0"> </span><span class="hl-7">&#39;2m&#39;</span><span class="hl-0"> })</span><br/><span class="hl-11">// see https://www.npmjs.com/package/parse-duration for valid string values</span>
</code><button>Copy</button></pre>
<a id="md:development" class="tsd-anchor"></a><h2><a href="#md:development">Development</a></h2><a id="md:testing" class="tsd-anchor"></a><h3><a href="#md:testing">Testing</a></h3><p>We run tests by executing <code>npm test</code> in a terminal window. This will run both Node.js and Browser tests, both in Chrome and PhantomJS. To ensure that the module conforms with the <a href="https://github.com/ipfs/js-ipfs/tree/master/packages/interface-ipfs-core"><code>interface-ipfs-core</code></a> spec, we run the batch of tests provided by the interface module, which can be found <a href="https://github.com/ipfs/js-ipfs/tree/master/packages/interface-ipfs-core/src">here</a>.</p>
<a id="md:testing-with-custom-kubo-binary" class="tsd-anchor"></a><h4><a href="#md:testing-with-custom-kubo-binary">Testing with Custom Kubo Binary</a></h4><p>By default, tests use the kubo binary from <code>node_modules</code>. To test with a custom kubo binary (e.g., a development version), use the <code>IPFS_GO_EXEC</code> environment variable:</p>
<pre><code class="language-bash"><span class="hl-11"># Test with a custom kubo binary</span><br/><span class="hl-10">IPFS_GO_EXEC</span><span class="hl-0">=</span><span class="hl-7">/path/to/custom/kubo</span><span class="hl-0"> </span><span class="hl-6">npm</span><span class="hl-0"> </span><span class="hl-7">test</span><br/><br/><span class="hl-11"># Example: testing with locally built kubo</span><br/><span class="hl-10">IPFS_GO_EXEC</span><span class="hl-0">=</span><span class="hl-7">/home/user/kubo/cmd/ipfs/ipfs</span><span class="hl-0"> </span><span class="hl-6">npm</span><span class="hl-0"> </span><span class="hl-7">test</span>
</code><button>Copy</button></pre>
<p>This is particularly useful when developing features that require changes to both kubo and this client.</p>
<a id="md:historical-context" class="tsd-anchor"></a><h2><a href="#md:historical-context">Historical context</a></h2><p>This module started as a direct mapping from the go-ipfs cli to a JavaScript implementation, although this was useful and familiar to a lot of developers that were coming to IPFS for the first time, it also created some confusion on how to operate the core of IPFS and have access to the full capacity of the protocol. After much consideration, we decided to create <code>interface-ipfs-core</code> with the goal of standardizing the interface of a core implementation of IPFS, and keep the utility functions the IPFS community learned to use and love, such as reading files from disk and storing them directly to IPFS.</p>
<a id="md:license" class="tsd-anchor"></a><h2><a href="#md:license">License</a></h2><p>Licensed under either of</p>
<ul>
<li>Apache 2.0, (<a href="LICENSE-APACHE">LICENSE-APACHE</a> / <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>)</li>
<li>MIT (<a href="LICENSE-MIT">LICENSE-MIT</a> / <a href="http://opensource.org/licenses/MIT">http://opensource.org/licenses/MIT</a>)</li>
</ul>
<a id="md:contribute" class="tsd-anchor"></a><h2><a href="#md:contribute">Contribute</a></h2><p>Contributions welcome! Please check out <a href="https://github.com/ipfs/js-kubo-rpc-client/issues">the issues</a>.</p>
<p>Also see our <a href="https://github.com/ipfs/community/blob/master/CONTRIBUTING_JS.md">contributing document</a> for more information on how we work, and about contributing in general.</p>
<p>Please be aware that all interactions related to this repo are subject to the IPFS <a href="https://github.com/ipfs/community/blob/master/code-of-conduct.md">Code of Conduct</a>.</p>
<p>Unless you explicitly state otherwise, any contribution intentionally submitted for inclusion in the work by you, as defined in the Apache-2.0 license, shall be dual licensed as above, without any additional terms or conditions.</p>
<p><a href="https://github.com/ipfs/community/blob/master/CONTRIBUTING.md"><img src="https://cdn.rawgit.com/jbenet/contribute-ipfs-gif/master/img/contribute.gif" alt=""></a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:kubo-rpc-client-"><span>kubo-<wbr/>rpc-<wbr/>client </span></a><ul><li><a href="#md:table-of-contents-"><span>Table of contents </span></a></li><li><a href="#md:install"><span>Install</span></a></li><li><ul><li><a href="#md:browser-ltscriptgt-tag"><span>Browser &lt;script&gt; tag</span></a></li></ul></li><li><a href="#md:kubo-rpc-client"><span>Kubo RPC <wbr/>Client</span></a></li><li><a href="#md:getting-started"><span>Getting <wbr/>Started</span></a></li><li><ul><li><a href="#md:next-steps"><span>Next <wbr/>Steps</span></a></li></ul></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><ul><li><a href="#md:createoptions"><span>create([options])</span></a></li><li><a href="#md:parameters"><span>Parameters</span></a></li><li><a href="#md:options"><span>Options</span></a></li><li><a href="#md:returns"><span>Returns</span></a></li><li><a href="#md:example"><span>Example</span></a></li></ul></li><li><a href="#md:api"><span>API</span></a></li><li><a href="#md:additional-options"><span>Additional <wbr/>Options</span></a></li><li><a href="#md:instance-utils"><span>Instance <wbr/>Utils</span></a></li><li><a href="#md:static-types-and-utils"><span>Static <wbr/>Types and <wbr/>Utils</span></a></li><li><ul><li><a href="#md:glob-source"><span>Glob source</span></a></li><li><ul><li><a href="#md:globsourcepath-pattern-options"><span>glob<wbr/>Source(path, pattern, [options])</span></a></li><li><a href="#md:example-1"><span>Example</span></a></li></ul></li><li><a href="#md:url-source"><span>URL source</span></a></li><li><ul><li><a href="#md:urlsourceurl"><span>url<wbr/>Source(url)</span></a></li><li><a href="#md:example-2"><span>Example</span></a></li></ul></li></ul></li><li><a href="#md:running-the-daemon-with-the-right-port"><span>Running the daemon with the right port</span></a></li><li><a href="#md:importing-the-module-and-usage"><span>Importing the module and usage</span></a></li><li><a href="#md:in-a-web-browser"><span>In a web browser</span></a></li><li><a href="#md:custom-headers"><span>Custom <wbr/>Headers</span></a></li><li><a href="#md:global-timeouts"><span>Global <wbr/>Timeouts</span></a></li></ul></li><li><a href="#md:development"><span>Development</span></a></li><li><ul><li><a href="#md:testing"><span>Testing</span></a></li><li><ul><li><a href="#md:testing-with-custom-kubo-binary"><span>Testing with <wbr/>Custom <wbr/>Kubo <wbr/>Binary</span></a></li></ul></li></ul></li><li><a href="#md:historical-context"><span>Historical context</span></a></li><li><a href="#md:license"><span>License</span></a></li><li><a href="#md:contribute"><span>Contribute</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>kubo-rpc-client</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>